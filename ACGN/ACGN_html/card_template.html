{% macro card(cardDict) %}
    <div class="card rank_{{ cardDict['rank'] }}">
        <div class="rank rounded-circle">{{ cardDict['rank'] }}</div>
        <div id="carousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                {% for i in range(1,cardDict['img_length']+1) %}
                    {% if i==1 %}
                        <div class="carousel-item active">
                            <img src="../ACGN_static/ACGN_img/{{ cardDict['name']~'_'~i }}.png" width="100%">
                        </div>
                    {% else %}
                        <div class="carousel-item">
                            <img src="../ACGN_static/ACGN_img/{{ cardDict['name']~'_'~i }}.png" width="100%">
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <a class="carousel-control-prev" href="#carousel" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#carousel" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>
        </div>
        <div class="card-header text-center">
            {{ cardDict['type'] }}
        </div>
        <div class="card-body">
            <h3>{{ cardDict['name'] }}</h3>
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                综评：{{ cardDict['rank'] }}
                <ul class="list-group list-group-flush">
                    {% for character,character_rank in cardDict['character'].items() %}
                        <li class="list-group-item list_flex">
                            <span class="list_flex_text">{{ character }}：{{ character_rank }}</span>
                            <div class="list_flex_rating">
                                {% set heart_num=(rank_visualize[character_rank][0]*2)|int %}
                                {% if heart_num is even %}
                                    {% for i in range(0,heart_num,2) %}
                                        <img class="heart" src="../ACGN_static/ACGN_img/heart.svg">
                                    {% endfor %}
                                {% else %}
                                    {% for i in range(0,heart_num-1,2) %}
                                        <img class="heart" src="../ACGN_static/ACGN_img/heart.svg">
                                    {% endfor %}
                                    <img class="heart" src="../ACGN_static/ACGN_img/half_heart.svg">
                                {% endif %}
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </li>
            <li class="list-group-item list_flex">
                <span class="list_flex_text">剧情：{{ cardDict['script'] }}</span>
                <div class="progress list_flex_progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                         style="width: {{ rank_visualize[cardDict['script']][1] }}%;"></div>
                </div>
            </li>
            <li class="list-group-item list_flex">
                <span class="list_flex_text">音乐：{{ cardDict['music'] }}</span>
                <div class="progress list_flex_progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                         style="width: {{ rank_visualize[cardDict['music']][1] }}%;"></div>
                </div>
            </li>
            <li class="list-group-item list_flex">
                <span class="list_flex_text">人设：{{ cardDict['character_rank'] }}</span>
                <div class="progress list_flex_progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                         style="width: {{ rank_visualize[cardDict['character_rank']][1] }}%;"></div>
                </div>
            </li>
            <li class="list-group-item list_flex">
                <span class="list_flex_text">画风：{{ cardDict['cg'] }}-</span>
                <div class="progress list_flex_progress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                         style="width: {{ rank_visualize[cardDict['cg']][1] }}%;"></div>
                </div>
            </li>
        </ul>
        <div class="card-footer text-muted text-center">
            完结撒花于{{ cardDict['finish_date'] }}
        </div>
    </div>
{% endmacro %}